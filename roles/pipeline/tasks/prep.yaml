---

# Common playbook preparation.

# Expose ansible version
- debug:
    var: ansible_version.full

# Basic pre-playbook prerequisites.
# We need the openshift/kubernetes module amongst other things...

- name: Install prerequisite Python modules
  pip:
    name:
    - openshift==0.10.1
    extra_args: --user

# Install required Ansible Galaxy modules

- name: Install Ansible Galaxy modules
  command: ansible-galaxy install -r requirements.yaml
  register: ag_result
  changed_when: "'downloading role' in ag_result.stdout"
